<div class="admin-page">

  <!-- Main Content with Sidebar -->
  <div class="admin-content">
    <!-- Sidebar -->
    <mat-sidenav-container class="admin-sidenav-container">
      <mat-sidenav mode="side" opened class="admin-sidebar">
        <mat-nav-list>
          <mat-list-item (click)="setCurrentSection('categories')" [class.active]="currentSection === 'categories'">
            <mat-icon matListIcon>category</mat-icon>
            <span matLine>Quản Lý Danh Mục</span>
          </mat-list-item>

          <mat-list-item (click)="setCurrentSection('posts')" [class.active]="currentSection === 'posts'">
            <mat-icon matListIcon>article</mat-icon>
            <span matLine>Quản Lý Bài Viết</span>
          </mat-list-item>

          <mat-list-item (click)="setCurrentSection('media')" [class.active]="currentSection === 'media'">
            <mat-icon matListIcon>perm_media</mat-icon>
            <span matLine>Quản Lý Media</span>
          </mat-list-item>

          <mat-list-item (click)="setCurrentSection('homepage')" [class.active]="currentSection === 'homepage'">
            <mat-icon matListIcon>home</mat-icon>
            <span matLine>Quản Lý Trang Chủ</span>
          </mat-list-item>

          <mat-list-item (click)="setCurrentSection('footer')" [class.active]="currentSection === 'footer'">
            <mat-icon matListIcon>web</mat-icon>
            <span matLine>Quản Lý Footer</span>
          </mat-list-item>
        </mat-nav-list>
      </mat-sidenav>

      <!-- Main Content Area -->
      <mat-sidenav-content class="main-content">

        <!-- Categories Section -->
        <div *ngIf="currentSection === 'categories'" class="content-section">
          <div class="section-header">
            <h2>Danh Mục Hệ Thống</h2>
            <div class="category-actions">
              <button mat-raised-button color="primary" (click)="openCategoryDialog()">
                <mat-icon>add</mat-icon>
                Thêm Danh Mục Chính
              </button>
            </div>
          </div>

          <!-- Category Tree View -->
          <mat-card class="category-tree-card">
            <div class="category-tree" *ngIf="categoryTree$ | async as tree">
              <div cdkDropList class="category-drop-list" (cdkDropListDropped)="onCategoryDrop($event, tree)">
                <div class="tree-item main-category" *ngFor="let mainCategory of tree; let i = index"
                  [class.expanded]="mainCategory.expanded" cdkDrag [cdkDragData]="mainCategory">

                  <!-- Main Category -->
                  <div class="category-header">
                    <div class="category-info">
                      <!-- Drag Handle -->
                      <div class="drag-handle" cdkDragHandle>
                        <mat-icon>drag_indicator</mat-icon>
                      </div>

                      <!-- Category Thumbnail or Icon -->
                      <div class="category-thumbnail-container">
                        <img *ngIf="mainCategory.thumbnail_url" [src]="mainCategory.thumbnail_url"
                          [alt]="mainCategory.name" class="category-thumbnail" (error)="onThumbnailError($event)">
                        <mat-icon *ngIf="!mainCategory.thumbnail_url" class="category-icon">{{
                          getCategoryIcon(mainCategory.slug) }}</mat-icon>
                      </div>
                      <div class="category-details">
                        <div class="category-name">
                          {{ mainCategory.name }}
                          <span *ngIf="!mainCategory.is_active" class="inactive-badge">(Inactive)</span>
                        </div>
                        <div class="category-meta">
                          <span class="category-type-badge" [class]="'type-' + mainCategory.category_type">
                            {{ mainCategory.category_type === 'product' ? 'Sản phẩm' : 'Tin tức' }}
                          </span>
                          {{ mainCategory.slug }} • {{ mainCategory.description }} • Level: {{ mainCategory.level }}
                        </div>
                      </div>
                    </div>
                    <div class="category-actions-inline">


                      <!-- Regular Actions -->
                      <button mat-icon-button [disabled]="mainCategory.category_type !== 'product'"
                        (click)="openCategoryDialog(undefined, true, mainCategory.id)" matTooltip="Thêm danh mục con">
                        <mat-icon>add_circle_outline</mat-icon>
                      </button>
                      <button mat-icon-button (click)="editCategory(mainCategory)" matTooltip="Chỉnh sửa">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button mat-icon-button color="warn" (click)="deleteCategory(mainCategory.id)" matTooltip="Xóa">
                        <mat-icon>delete</mat-icon>
                      </button>

                      <!-- Order Controls -->
                      <div class="order-controls">
                        <button mat-icon-button class="order-btn" [disabled]="i === 0"
                          (click)="moveCategoryUp(mainCategory, tree, i)" matTooltip="Di chuyển lên">
                          <mat-icon>keyboard_arrow_up</mat-icon>
                        </button>
                        <button mat-icon-button class="order-btn" [disabled]="i === tree.length - 1"
                          (click)="moveCategoryDown(mainCategory, tree, i)" matTooltip="Di chuyển xuống">
                          <mat-icon>keyboard_arrow_down</mat-icon>
                        </button>
                      </div>
                      <!-- Expand Button -->
                      <button mat-icon-button class="expand-btn"
                        [disabled]="!mainCategory.hasChildren || mainCategory.category_type !== 'product'"
                        (click)="toggleCategory(mainCategory)">
                        <mat-icon>{{ mainCategory.expanded ? 'expand_less' : 'expand_more' }}</mat-icon>
                      </button>
                    </div>
                  </div>

                  <!-- Subcategories -->
                  <div class="subcategories"
                    *ngIf="mainCategory.expanded && mainCategory.children?.length && mainCategory.category_type === 'product'">
                    <div cdkDropList class="subcategory-drop-list"
                      (cdkDropListDropped)="onSubcategoryDrop($event, mainCategory.children!)">
                      <div class="tree-item subcategory"
                        *ngFor="let subcategory of mainCategory.children; let j = index" cdkDrag
                        [cdkDragData]="subcategory">

                        <!-- Subcategory Drag Handle -->
                        <div class="drag-handle subcategory-drag" cdkDragHandle>
                          <mat-icon>drag_indicator</mat-icon>
                        </div>

                        <div class="category-header subcategory-header">
                          <div class="category-info">
                            <div class="subcategory-indicator"></div>
                            <!-- Subcategory Thumbnail or Icon -->
                            <div class="category-thumbnail-container">
                              <img *ngIf="subcategory.thumbnail_url" [src]="subcategory.thumbnail_url"
                                [alt]="subcategory.name" class="category-thumbnail subcategory-thumbnail"
                                (error)="onThumbnailError($event)">
                              <mat-icon *ngIf="!subcategory.thumbnail_url" class="category-icon subcategory-icon">{{
                                getCategoryIcon(subcategory.slug) }}</mat-icon>
                            </div>
                            <div class="category-details">
                              <div class="category-name">
                                {{ subcategory.name }}
                                <span *ngIf="!subcategory.is_active" class="inactive-badge">(Inactive)</span>
                              </div>
                              <div class="category-meta">{{ subcategory.slug }} • {{ subcategory.description }} • Level:
                                {{ subcategory.level }}</div>
                            </div>
                          </div>
                          <div class="category-actions-inline">


                            <!-- Regular Subcategory Actions -->
                            <button mat-icon-button (click)="editCategory(subcategory)" matTooltip="Chỉnh sửa">
                              <mat-icon>edit</mat-icon>
                            </button>
                            <button mat-icon-button color="warn" (click)="deleteCategory(subcategory.id)"
                              matTooltip="Xóa">
                              <mat-icon>delete</mat-icon>
                            </button>
                            <!-- Subcategory Order Controls -->
                            <div class="order-controls">
                              <button mat-icon-button class="order-btn" [disabled]="j === 0"
                                (click)="moveSubcategoryUp(subcategory, mainCategory.children!, j)"
                                matTooltip="Di chuyển lên">
                                <mat-icon>keyboard_arrow_up</mat-icon>
                              </button>
                              <button mat-icon-button class="order-btn"
                                [disabled]="j === (mainCategory.children?.length || 0) - 1"
                                (click)="moveSubcategoryDown(subcategory, mainCategory.children!, j)"
                                matTooltip="Di chuyển xuống">
                                <mat-icon>keyboard_arrow_down</mat-icon>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Empty State -->
            <div class="empty-state" *ngIf="!(categoryTree$ | async)?.length">
              <mat-icon class="empty-icon">category</mat-icon>
              <h3>Chưa có danh mục nào</h3>
              <p>Hãy tạo danh mục đầu tiên để bắt đầu</p>
            </div>
          </mat-card>
        </div>

        <!-- Posts Section -->
        <div *ngIf="currentSection === 'posts'" class="content-section">
          <div class="section-header">
            <h2>Bài Viết</h2>
            <button mat-raised-button color="primary" (click)="openPostDialog()">
              <mat-icon>add</mat-icon>
              Thêm Bài Viết
            </button>
          </div>

          <mat-card class="data-table-card">
            <table mat-table [dataSource]="(posts$ | async) || []" class="admin-table">
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>ID</th>
                <td mat-cell *matCellDef="let post">{{ post.id }}</td>
              </ng-container>

              <ng-container matColumnDef="title">
                <th mat-header-cell *matHeaderCellDef>Tiêu đề</th>
                <td mat-cell *matCellDef="let post">{{ post.title }}</td>
              </ng-container>

              <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef>Danh mục</th>
                <td mat-cell *matCellDef="let post">{{ post.category?.name }}</td>
              </ng-container>

              <ng-container matColumnDef="published">
                <th mat-header-cell *matHeaderCellDef>Trạng thái</th>
                <td mat-cell *matCellDef="let post">
                  <span class="status-badge" [class.published]="post.published" [class.draft]="!post.published">
                    {{ post.published ? 'Đã xuất bản' : 'Nháp' }}
                  </span>
                </td>
              </ng-container>

              <ng-container matColumnDef="views">
                <th mat-header-cell *matHeaderCellDef>Lượt xem</th>
                <td mat-cell *matCellDef="let post">{{ post.views || 0 }}</td>
              </ng-container>

              <ng-container matColumnDef="created_at">
                <th mat-header-cell *matHeaderCellDef>Ngày tạo</th>
                <td mat-cell *matCellDef="let post">{{ post.created_at | date:'dd/MM/yyyy' }}</td>
              </ng-container>

              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>Hành động</th>
                <td mat-cell *matCellDef="let post">
                  <button mat-icon-button (click)="editPost(post)">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="deletePost(post.id)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="postColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: postColumns;"></tr>
            </table>
          </mat-card>
        </div>

        <!-- Media Section -->
        <div *ngIf="currentSection === 'media'" class="content-section">
          <div class="section-header">
            <h2>Quản Lý Media</h2>
            <button mat-raised-button color="primary">
              <mat-icon>cloud_upload</mat-icon>
              Tải Lên Media
            </button>
          </div>

          <mat-card class="data-table-card">
            <p>Tính năng quản lý media đang được phát triển...</p>
          </mat-card>
        </div>

        <!-- Homepage Management Section -->
        <div *ngIf="currentSection === 'homepage'" class="content-section">
          <div class="section-header">
            <h2>Quản Lý Trang Chủ</h2>
            <div class="homepage-actions">
              <button mat-raised-button color="primary" (click)="uploadHomepageImage()">
                <mat-icon>add_photo_alternate</mat-icon>
                Thêm Hình Ảnh
              </button>
              <button mat-stroked-button color="primary" (click)="uploadHomepageVideo()">
                <mat-icon>videocam</mat-icon>
                Thêm Video
              </button>
            </div>
          </div>

          <!-- Images Section -->
          <mat-card class="homepage-media-card">
            <div class="media-section-header">
              <h3>Hình Ảnh Trang Chủ</h3>
              <button mat-icon-button (click)="refreshHomepageMedia()">
                <mat-icon>refresh</mat-icon>
              </button>
            </div>

            <div class="media-grid" *ngIf="homepageImages.length > 0; else noImages">
              <div class="media-item" *ngFor="let image of homepageImages; let i = index">
                <div class="media-preview">
                  <img [src]="image" [alt]="'Homepage image ' + (i + 1)" loading="lazy">
                  <div class="media-overlay">
                    <button mat-icon-button class="overlay-btn replace-btn"
                      (click)="replaceHomepageMedia(image, 'images')" matTooltip="Thay thế">
                      <mat-icon>swap_horiz</mat-icon>
                    </button>
                    <button mat-icon-button class="overlay-btn delete-btn"
                      (click)="deleteHomepageMedia(image, 'images')" matTooltip="Xóa">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </div>
                <div class="media-info">
                  <span class="media-filename">{{ getFilename(image) }}</span>
                </div>
              </div>
            </div>

            <ng-template #noImages>
              <div class="empty-media-state">
                <mat-icon>photo_library</mat-icon>
                <p>Chưa có hình ảnh nào</p>
              </div>
            </ng-template>
          </mat-card>

          <!-- Videos Section -->
          <mat-card class="homepage-media-card">
            <div class="media-section-header">
              <h3>Video Trang Chủ</h3>
              <button mat-icon-button (click)="refreshHomepageMedia()">
                <mat-icon>refresh</mat-icon>
              </button>
            </div>

            <div class="media-grid" *ngIf="homepageVideos.length > 0; else noVideos">
              <div class="media-item" *ngFor="let video of homepageVideos; let i = index">
                <div class="media-preview video-preview">
                  <video [src]="video" preload="metadata" muted>
                    Trình duyệt không hỗ trợ video
                  </video>
                  <div class="media-overlay">
                    <button mat-icon-button class="overlay-btn play-btn" (click)="playVideo(video)" matTooltip="Phát">
                      <mat-icon>play_arrow</mat-icon>
                    </button>
                    <button mat-icon-button class="overlay-btn replace-btn"
                      (click)="replaceHomepageMedia(video, 'videos')" matTooltip="Thay thế">
                      <mat-icon>swap_horiz</mat-icon>
                    </button>
                    <button mat-icon-button class="overlay-btn delete-btn"
                      (click)="deleteHomepageMedia(video, 'videos')" matTooltip="Xóa">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                </div>
                <div class="media-info">
                  <span class="media-filename">{{ getFilename(video) }}</span>
                </div>
              </div>
            </div>

            <ng-template #noVideos>
              <div class="empty-media-state">
                <mat-icon>video_library</mat-icon>
                <p>Chưa có video nào</p>
              </div>
            </ng-template>
          </mat-card>

          <!-- Hero Content Management Section -->
          <mat-card class="homepage-content-card">
            <div class="content-section-header">
              <h3>Nội Dung Trang Chủ</h3>
              <button mat-raised-button color="primary" (click)="saveHomepageContent()" [disabled]="!isContentModified">
                <mat-icon>save</mat-icon>
                Lưu Thay Đổi
              </button>
            </div>

            <div class="content-form">
              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Tiêu đề chính</mat-label>
                <input matInput [(ngModel)]="homepageContent.hero_title" (ngModelChange)="onContentChange()"
                  placeholder="Nhập tiêu đề chính">
              </mat-form-field>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Mô tả</mat-label>
                <textarea matInput [(ngModel)]="homepageContent.hero_description" (ngModelChange)="onContentChange()"
                  rows="3" placeholder="Nhập mô tả trang chủ"></textarea>
              </mat-form-field>

              <div class="stats-row">
                <mat-form-field appearance="fill">
                  <mat-label>Số liệu 1</mat-label>
                  <input matInput [(ngModel)]="homepageContent.hero_stat1_number" (ngModelChange)="onContentChange()"
                    placeholder="37">
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Nhãn số liệu 1</mat-label>
                  <input matInput [(ngModel)]="homepageContent.hero_stat1_label" (ngModelChange)="onContentChange()"
                    placeholder="Tỉnh Thành Phủ Sóng">
                </mat-form-field>
              </div>

              <div class="stats-row">
                <mat-form-field appearance="fill">
                  <mat-label>Số liệu 2</mat-label>
                  <input matInput [(ngModel)]="homepageContent.hero_stat2_number" (ngModelChange)="onContentChange()"
                    placeholder="500+">
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Nhãn số liệu 2</mat-label>
                  <input matInput [(ngModel)]="homepageContent.hero_stat2_label" (ngModelChange)="onContentChange()"
                    placeholder="Dự Án Biệt Thự/Nhà Ở Chuyên Nghiệp">
                </mat-form-field>
              </div>

              <!-- Features Section -->
              <div class="section-divider">
                <h4 class="section-title">⭐ Phần Tính Năng</h4>
              </div>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Tiêu đề phần tính năng</mat-label>
                <input matInput [(ngModel)]="homepageContent.features_title" (ngModelChange)="onContentChange()"
                  placeholder="Ưu Thế MMA Architectural Design">
              </mat-form-field>

              <!-- Feature 1 -->
              <div class="feature-item">
                <h5 class="feature-title">Tính năng 1 - Left Aligned</h5>
                <div class="feature-row">
                  <div class="icon-field">
                    <label class="icon-selector-label">Icon</label>
                    <app-icon-selector [iconValue]="homepageContent.feature1_icon || 'architecture'"
                      (iconChange)="onFeature1IconChange($event)">
                    </app-icon-selector>
                  </div>
                  <div class="title-field">
                    <label class="field-label">Tiêu đề</label>
                    <input type="text" class="form-input" [(ngModel)]="homepageContent.feature1_title"
                      (ngModelChange)="onContentChange()" placeholder="Thiết Kế Kiến Trúc Độc Đáo">
                  </div>
                </div>
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Mô tả</mat-label>
                  <textarea matInput [(ngModel)]="homepageContent.feature1_description"
                    (ngModelChange)="onContentChange()" rows="3"
                    placeholder="Chuyên gia kiến trúc sư với hơn 10 năm kinh nghiệm, tạo ra những công trình biệt thự và nhà ở đẳng cấp."></textarea>
                </mat-form-field>
              </div>

              <!-- Feature 2 -->
              <div class="feature-item">
                <h5 class="feature-title">Tính năng 2 - Right Aligned</h5>
                <div class="feature-row">
                  <div class="icon-field">
                    <label class="icon-selector-label">Icon</label>
                    <app-icon-selector [iconValue]="homepageContent.feature2_icon || 'engineering'"
                      (iconChange)="onFeature2IconChange($event)">
                    </app-icon-selector>
                  </div>
                  <div class="title-field">
                    <label class="field-label">Tiêu đề</label>
                    <input type="text" class="form-input" [(ngModel)]="homepageContent.feature2_title"
                      (ngModelChange)="onContentChange()" placeholder="Thi Công Chất Lượng Cao">
                  </div>
                </div>
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Mô tả</mat-label>
                  <textarea matInput [(ngModel)]="homepageContent.feature2_description"
                    (ngModelChange)="onContentChange()" rows="3"
                    placeholder="Đội ngũ kỹ sư và công nhân tay nghề cao, sử dụng công nghệ hiện đại trong thi công."></textarea>
                </mat-form-field>
              </div>

              <!-- Feature 3 -->
              <div class="feature-item">
                <h5 class="feature-title">Tính năng 3 - Left Aligned</h5>
                <div class="feature-row">
                  <div class="icon-field">
                    <label class="icon-selector-label">Icon</label>
                    <app-icon-selector [iconValue]="homepageContent.feature3_icon || 'business'"
                      (iconChange)="onFeature3IconChange($event)">
                    </app-icon-selector>
                  </div>
                  <div class="title-field">
                    <label class="field-label">Tiêu đề</label>
                    <input type="text" class="form-input" [(ngModel)]="homepageContent.feature3_title"
                      (ngModelChange)="onContentChange()" placeholder="Dịch Vụ Toàn Diện">
                  </div>
                </div>
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Mô tả</mat-label>
                  <textarea matInput [(ngModel)]="homepageContent.feature3_description"
                    (ngModelChange)="onContentChange()" rows="3"
                    placeholder="Từ thiết kế kiến trúc, nội thất đến giám sát thi công và bàn giao hoàn thiện."></textarea>
                </mat-form-field>
              </div>

              <!-- Feature 4 -->
              <div class="feature-item">
                <h5 class="feature-title">Tính năng 4 - Right Aligned</h5>
                <div class="feature-row">
                  <div class="icon-field">
                    <label class="icon-selector-label">Icon</label>
                    <app-icon-selector [iconValue]="homepageContent.feature4_icon || 'verified'"
                      (iconChange)="onFeature4IconChange($event)">
                    </app-icon-selector>
                  </div>
                  <div class="title-field">
                    <label class="field-label">Tiêu đề</label>
                    <input type="text" class="form-input" [(ngModel)]="homepageContent.feature4_title"
                      (ngModelChange)="onContentChange()" placeholder="Uy Tín 37 Tỉnh Thành">
                  </div>
                </div>
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Mô tả</mat-label>
                  <textarea matInput [(ngModel)]="homepageContent.feature4_description"
                    (ngModelChange)="onContentChange()" rows="3"
                    placeholder="Đã hoàn thành hơn 500 dự án biệt thự và nhà ở trên toàn quốc, được khách hàng tin tưởng."></textarea>
                </mat-form-field>
              </div>

            </div>
          </mat-card>
        </div>

        <!-- Footer Management Section -->
        <div *ngIf="currentSection === 'footer'" class="content-section">
          <div class="section-header">
            <h2>Quản Lý Footer</h2>
            <button mat-raised-button color="primary" (click)="saveFooterContent()"
              [disabled]="!isFooterContentModified">
              <mat-icon>save</mat-icon>
              Lưu Thay Đổi
            </button>
          </div>

          <mat-card class="footer-content-card">
            <div class="footer-form">
              <!-- Company Information -->
              <div class="section-divider">
                <h4 class="section-title">📍 Thông Tin Công Ty</h4>
              </div>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Tên công ty</mat-label>
                <input matInput [(ngModel)]="footerContent.company_name" (ngModelChange)="onFooterContentChange()"
                  placeholder="MMA Architectural Design">
              </mat-form-field>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Địa chỉ</mat-label>
                <textarea matInput [(ngModel)]="footerContent.address" (ngModelChange)="onFooterContentChange()"
                  rows="2" placeholder="123 Đường ABC, Quận XYZ, TP.HCM"></textarea>
              </mat-form-field>

              <div class="contact-row">
                <mat-form-field appearance="fill">
                  <mat-label>Số điện thoại</mat-label>
                  <input matInput [(ngModel)]="footerContent.phone" (ngModelChange)="onFooterContentChange()"
                    placeholder="0123 456 789">
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>Email</mat-label>
                  <input matInput [(ngModel)]="footerContent.email" (ngModelChange)="onFooterContentChange()"
                    placeholder="contact@company.com">
                </mat-form-field>
              </div>

              <!-- Dynamic Social Media Links -->
              <div class="section-divider">
                <h4 class="section-title">🔗 Mạng Xã Hội</h4>
              </div>

              <div class="social-media-list">
                <div class="social-media-item"
                  *ngFor="let socialMedia of footerContent.social_media || []; let i = index; trackBy: trackByIndex">

                  <div class="social-media-header">
                    <div class="social-media-title">Mạng xã hội {{i + 1}}</div>
                    <button class="remove-social-btn" (click)="removeSocialMedia(i)"
                      [disabled]="footerContent.social_media.length <= 1" title="Xóa mạng xã hội">
                      <span class="remove-icon">✕</span>
                    </button>
                  </div>

                  <div class="social-media-form">
                    <div class="icon-name-row">
                      <div class="icon-field">
                        <label class="icon-selector-label">Icon</label>
                        <app-icon-selector [iconValue]="socialMedia.icon || 'public'"
                          (iconChange)="onSocialMediaIconChange(i, $event)">
                        </app-icon-selector>
                      </div>

                      <div class="name-field">
                        <label class="field-label">Tên mạng xã hội</label>
                        <input type="text" class="form-input" [(ngModel)]="footerContent.social_media[i].name"
                          (ngModelChange)="onSocialMediaChange(i, 'name', $event)" placeholder="Facebook">
                      </div>
                    </div>

                    <div class="url-field">
                      <label class="field-label">URL</label>
                      <input type="url" class="form-input" [(ngModel)]="footerContent.social_media[i].url"
                        (ngModelChange)="onSocialMediaChange(i, 'url', $event)"
                        placeholder="https://facebook.com/company">
                    </div>
                  </div>
                </div>

                <button class="add-social-btn" (click)="addSocialMedia()">
                  <span class="add-icon">+</span>
                  Thêm Mạng Xã Hội
                </button>

              </div>

              <!-- Copyright Information -->
              <div class="section-divider">
                <h4 class="section-title">©️ Bản Quyền</h4>
              </div>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Thông tin bản quyền</mat-label>
                <input matInput [(ngModel)]="footerContent.copyright_text" (ngModelChange)="onFooterContentChange()"
                  placeholder="© 2024 MMA Architectural Design. All rights reserved.">
              </mat-form-field>

              <!-- Additional Information -->
              <div class="section-divider">
                <h4 class="section-title">ℹ️ Thông Tin Bổ Sung</h4>
              </div>

              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Mô tả ngắn</mat-label>
                <textarea matInput [(ngModel)]="footerContent.description" (ngModelChange)="onFooterContentChange()"
                  rows="3"
                  placeholder="Chuyên thiết kế và thi công biệt thự, nhà ở hiện đại với phong cách kiến trúc độc đáo"></textarea>
              </mat-form-field>

              <!-- Services Section -->
              <div class="section-divider">
                <h4 class="section-title">🔧 Danh Sách Dịch Vụ</h4>
              </div>

              <div class="services-list">
                <div class="service-item"
                  *ngFor="let service of footerContent.services || []; let i = index; trackBy: trackByIndex">
                  <mat-form-field appearance="fill" class="service-input">
                    <mat-label>Dịch vụ {{i + 1}}</mat-label>
                    <input matInput [(ngModel)]="footerContent.services[i]" (ngModelChange)="onServiceChange(i, $event)"
                      placeholder="Nhập tên dịch vụ">
                  </mat-form-field>
                  <button mat-icon-button color="warn" (click)="removeService(i)"
                    [disabled]="footerContent.services.length <= 1" matTooltip="Xóa dịch vụ">
                    <mat-icon>remove_circle</mat-icon>
                  </button>
                </div>

                <button mat-stroked-button color="primary" (click)="addService()" class="add-service-btn">
                  <mat-icon>add_circle</mat-icon>
                  Thêm Dịch Vụ
                </button>
              </div>

            </div>
          </mat-card>
        </div>

      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
</div>